<style>
    .profile-setup {
      background-color: #fff;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      align-items: center;
      padding: 0 80px 38px;
    }
    @media (max-width: 991px) {
      .profile-setup {
        padding: 0 20px;
      }
    }
    .content-wrapper {
      display: flex;
      width: 480px;
      max-width: 100%;
      flex-direction: column;
      margin: 0 auto;
    }
    .progress-bar {
      border-radius: 8px;
      background-color: #d9d9d9;
      align-self: center;
      display: flex;
      width: 576px;
      max-width: 100%;
      height: 1px;
    }
    .setup-card {
      border-radius: 20px;
      background-color: #fff;
      box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
      display: flex;
      margin-top: 36px;
      width: 100%;
      flex-direction: column;
      padding: 32px 26px;
      position: relative;
    }
    @media (max-width: 991px) {
      .setup-card {
        padding: 32px 24px;
      }
    }
    .logo {
      aspect-ratio: 3.22;
      object-fit: contain;
      object-position: center;
      width: 148px;
      max-width: 100%;
      margin-bottom: 44px;
    }
    .progress-wrapper {
      align-self: center;
      display: flex;
      margin-top: 60px;
      margin-bottom: 40px;
      width: 571px;
      max-width: 100%;
      justify-content: center;
    }
    @media (max-width: 991px) {
      .progress-wrapper {
        margin-top: 40px;
      }
    }
    .progress-steps {
      display: flex;
      gap: 14px;
    }
    .step-number {
      color: #fff;
      font: 500 14px Inter, sans-serif;
    }
    .step-label {
      color: #4f46e5;
      font: 500 14px Inter, sans-serif;
    }
    .step-indicator {
      background-color: #e2e8f0;
      display: flex;
      flex-direction: column;
      align-items: start;
      margin: auto 0;
    }
    .step-progress {
      background-color: #4f46e5;
      display: flex;
      width: 78px;
      height: 2px;
    }
    .step-label-inactive {
      color: #64748b;
      flex-basis: auto;
      font: 500 14px Inter, sans-serif;
    }
    .step-counter {
      display: none;
    }
    .step-text {
      flex-grow: 1;
    }
    .step-numbers {
      display: flex;
    }
    .form-group {
      margin-top: 40px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .form-label {
      color: #1e293b;
      display: block;
      margin-bottom: 16px;
      font: 500 14px/1.4 Inter, sans-serif;
    }
    @media (max-width: 991px) {
      .form-label {
        margin-left: 10px;
      }
    }
    .form-input {
      width: 100%;
      padding: 15px 16px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      font: 400 14px Inter, sans-serif;
      color: #1e293b;
      transition: all 0.2s ease-in-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    @media (max-width: 991px) {
      .form-input {
        padding-right: 20px;
      }
    }
    .form-input:hover {
      border-color: #4f46e5;
      box-shadow: 0 4px 6px rgba(79, 70, 229, 0.1);
    }
    .form-input:focus {
      outline: none;
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
    }
    .language-grid {
      width: 100%;
      display: flex;
      gap: 16px;
      margin-top: 16px;
      justify-content: flex-start;
    }
    @media (max-width: 991px) {
      .language-grid {
        gap: 16px;
      }
    }
    .language-button {
      flex: 0 1 auto;
      min-width: 120px;
      text-align: center;
      padding: 13px 24px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      font: 500 14px/1.5 Inter, sans-serif;
      color: #64748b;
      background-color: #fff;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .language-button:hover {
      border-color: #4f46e5;
      color: #4f46e5;
      background-color: #f8fafc;
      box-shadow: 0 4px 6px rgba(79, 70, 229, 0.1);
      transform: translateY(-1px);
    }
    .language-button.selected {
      background-color: #4f46e5;
      color: #fff;
      border-color: #4f46e5;
      box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2);
    }
    .action-buttons {
      margin-top: 48px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      gap: 24px;
    }
    @media (max-width: 991px) {
      .form-input,
      .language-grid,
      .action-buttons {
        width: 100%;
      }
      .language-button {
        min-width: 120px;
        padding: 14px 24px;
      }
    }
    .previous-button {
      border-radius: 12px;
      color: #1e293b;
      padding: 16px 32px;
      border: 1px solid #e2e8f0;
      font: 500 14px Inter, sans-serif;
      transition: all 0.2s ease-in-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .previous-button:hover {
      background-color: #f8fafc;
      border-color: #4f46e5;
      color: #4f46e5;
      box-shadow: 0 4px 6px rgba(79, 70, 229, 0.1);
      transform: translateY(-1px);
    }
    .complete-button {
      border-radius: 12px;
      background-color: #4f46e5;
      color: #fff;
      padding: 16px 32px;
      border: none;
      font: 500 14px Inter, sans-serif;
      transition: all 0.2s ease-in-out;
      box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2);
    }
    .complete-button:hover {
      background-color: #4338ca;
      box-shadow: 0 6px 8px rgba(79, 70, 229, 0.3);
      transform: translateY(-1px);
    }
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    /* Add smooth transitions for all interactive elements */
    .form-input,
    .language-button,
    .previous-button,
    .complete-button {
      transition: all 0.2s ease-in-out;
    }
    .proficiency-container {
      margin-top: 24px;
      width: 100%;
    }

    .language-proficiency {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
      padding: 16px;
      border-radius: 12px;
      background-color: #f8fafc;
      border: 1px solid #e2e8f0;
    }

    .language-name {
      min-width: 120px;
      color: #1e293b;
      font: 500 16px Inter, sans-serif;
    }

    .proficiency-buttons {
      display: flex;
      gap: 12px;
      flex: 1;
    }

    .proficiency-button {
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      background-color: #fff;
      color: #64748b;
      font: 500 14px Inter, sans-serif;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }

    .proficiency-button:hover {
      border-color: #4f46e5;
      color: #4f46e5;
      background-color: #f8fafc;
      box-shadow: 0 2px 4px rgba(79, 70, 229, 0.1);
    }

    .proficiency-button.selected {
      background-color: #4f46e5;
      color: #fff;
      border-color: #4f46e5;
    }

    .progress-container {
      display: flex;
      gap: 32px;
      margin: 0 0 40px 0;
      align-items: center;
      width: 100%;
    }

    .progress-step {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .step-number {
      border-radius: 8px;
      background-color: #4f46e5;
      color: #fff;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font: 500 14px Inter, sans-serif;
      padding: 0;
    }

    .step-text {
      color: #4f46e5;
      font: 500 14px Inter, sans-serif;
    }

    .progress-bar {
      background-color: #e2e8f0;
      display: flex;
      width: 78px;
      height: 2px;
      margin: auto 8px;
    }

    .progress-fill {
      background-color: #4f46e5;
      display: flex;
      width: 78px;
      height: 2px;
    }

    .next-step {
      display: flex;
      gap: 12px;
      align-items: center;
      color: #64748b;
      font: 500 14px Inter, sans-serif;
      margin-left: 8px;
    }

    .next-step-number {
      border-radius: 8px;
      background-color: #e2e8f0;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #64748b;
    }

    .next-step-text {
      flex-basis: auto;
      white-space: nowrap;
      margin-left: 4px;
      color: #64748b;
    }

    /* Ensure form elements start after progress bar */
    .form-group:first-of-type {
      margin-top: 0;
    }

    #learning-prompt {
      font-size: 13px;
      line-height: 1.5;
    }
</style>
    
    <div class="profile-setup">
      <div class="content-wrapper">
        <div class="setup-card">
          <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/ff40d7229ec140058f362151fc1e4153/3a4a576d2df44e485d501912f9b1896d9a86d47fd61f6ba75de56c52d224e040?apiKey=ff40d7229ec140058f362151fc1e4153&" class="logo" alt="Company logo" />
          <div class="progress-container">
            <div class="progress-step">
              <div class="step-number">1</div>
              <div class="step-text">Basic Info</div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
            </div>
            <div class="next-step">
              <div class="next-step-number">2</div>
              <div class="next-step-text">Learning Goals</div>
            </div>
          </div>
          <form>
            <div class="form-group">
              <label for="industry" class="form-label">Industry</label>
              <input type="text" id="industry" class="form-input" placeholder="e.g. Customer Service" required />
            </div>
            <div class="form-group">
              <label for="job-role" class="form-label">Job Role</label>
              <input type="text" id="job-role" class="form-input" placeholder="e.g. Software Engineer" required />
            </div>
            <div class="form-group">
              <label for="languages" class="form-label">Languages & Proficiency</label>
              <div class="language-grid">
                <button type="button" class="language-button" onclick="toggleLanguage(this)">English</button>
                <button type="button" class="language-button" onclick="toggleLanguage(this)">Spanish</button>
                <button type="button" class="language-button" onclick="toggleLanguage(this)">French</button>
              </div>
              <div class="language-grid">
                <button type="button" class="language-button" onclick="toggleLanguage(this)">German</button>
                <button type="button" class="language-button" onclick="toggleLanguage(this)">Chinese</button>
                <button type="button" class="language-button" onclick="toggleLanguage(this)">Japanese</button>
              </div>
              <div class="language-grid">
                <button type="button" class="language-button" onclick="toggleLanguage(this)">Korean</button>
                <button type="button" class="language-button" onclick="toggleLanguage(this)">Italian</button>
                <button type="button" class="language-button" onclick="toggleLanguage(this)">Portuguese</button>
              </div>
            </div>
            <div id="proficiency-container" class="proficiency-container">
              <!-- Proficiency selections will be added here dynamically -->
            </div>
            <div class="action-buttons">
              <button type="button" class="previous-button" onclick="window.location.href='/welcome'">Previous</button>
              <button type="button" class="complete-button" onclick="handleProfileCompletion()">Complete Profile</button>
            </div>
          </form>
        </div>
      </div>
    </div>

<script>
let selectedLanguages = new Map(); // Store language and proficiency pairs

function toggleLanguage(button) {
    const language = button.textContent;
    button.classList.toggle('selected');
    
    if (button.classList.contains('selected')) {
        // Add language if not already in map
        if (!selectedLanguages.has(language)) {
            selectedLanguages.set(language, null);
        }
    } else {
        // Remove language if deselected
        selectedLanguages.delete(language);
    }
    
    updateProficiencySection();
}

function updateProficiencySection() {
    const container = document.getElementById('proficiency-container');
    container.innerHTML = '';
    
    selectedLanguages.forEach((proficiency, language) => {
        const section = createProficiencySection(language, proficiency);
        container.appendChild(section);
    });
}

function createProficiencySection(language, currentProficiency) {
    const section = document.createElement('div');
    section.className = 'language-proficiency';
    
    const languageName = document.createElement('div');
    languageName.className = 'language-name';
    languageName.textContent = language;
    
    const buttonsContainer = document.createElement('div');
    buttonsContainer.className = 'proficiency-buttons';
    
    ['Beginner', 'Intermediate', 'Advanced'].forEach(level => {
        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'proficiency-button';
        if (currentProficiency === level) {
            button.classList.add('selected');
        }
        button.textContent = level;
        button.onclick = function() {
            buttonsContainer.querySelectorAll('.proficiency-button')
                .forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedLanguages.set(language, level);
        };
        buttonsContainer.appendChild(button);
    });
    
    section.appendChild(languageName);
    section.appendChild(buttonsContainer);
    return section;
}

function handleProfileCompletion() {
    const industry = document.getElementById('industry').value;
    const jobRole = document.getElementById('job-role').value;
    
    if (!industry || !jobRole) {
        alert('Please fill in all required fields');
        return;
    }

    const languageData = Array.from(selectedLanguages.entries()).map(([language, proficiency]) => ({
        language,
        proficiency: proficiency || 'Not specified'
    }));

    localStorage.setItem('userProfile', JSON.stringify({
        industry,
        jobRole,
        languages: languageData
    }));

    window.location.href = '/learning';
}
</script>